<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Time Converter</title>
    <style>
      body {
        margin: 0;
        font-family: Inter, system-ui, sans-serif;
        background: #f7f9fc;
        padding: 14px;
        box-sizing: border-box;
      }
      .card {
        background: #fff;
        padding: 20px;
        border-radius: 12px;
        max-width: 420px;
        width: 100%;
        margin: auto;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
        box-sizing: border-box;
      }
      label {
        font-size: 13px;
        font-weight: 500;
        display: block;
        margin-bottom: 4px;
      }
      input,
      select {
        width: 100%;
        padding: 9px 10px;
        border-radius: 8px;
        border: 1px solid #e3e7ee;
        font-size: 14px;
        box-sizing: border-box;
      }
      .field {
        margin-bottom: 14px;
      }
      .result {
        margin-top: 16px;
        background: #fbfdff;
        border: 1px dashed #d8e4ff;
        padding: 14px;
        border-radius: 8px;
        font-size: 14px;
        box-sizing: border-box;
        word-break: break-word;
      }
      .muted {
        font-size: 12px;
        color: #666;
      }
    </style>
  </head>

  <body>
    <div class="card">
      <h2 style="font-size: 16px; margin: 0 0 12px">Time Converter</h2>

      <div class="field">
        <label>Date (UTC)</label>
        <input type="date" id="dateInput" />
      </div>

      <div class="field">
        <label>Time (UTC)</label>
        <input type="time" id="timeInput" />
      </div>

      <div class="field">
        <label>Time Zone</label>
        <select id="tzInput">
          <option value="UTC">UTC</option>
          <option value="Asia/Kolkata">IST (Asia/Kolkata)</option>
          <option value="America/Los_Angeles">PST (America/Los_Angeles)</option>
          <option value="America/Chicago">CST (America/Chicago)</option>
          <option value="Asia/Singapore">SGT (Asia/Singapore)</option>
        </select>
      </div>

      <div class="result" id="result">
        <div class="muted">Converted results will appear here.</div>
      </div>
    </div>

    <script>
      const dateInput = document.getElementById("dateInput");
      const timeInput = document.getElementById("timeInput");
      const tzInput = document.getElementById("tzInput");
      const resultDiv = document.getElementById("result");

      // Fixed timezone offsets (minutes)
      const tzOffsets = {
        UTC: 0,
        "Asia/Kolkata": 330,
        "America/Los_Angeles": -480,
        "America/Chicago": -360,
        "Asia/Singapore": 480,
      };

      // âœ… Default to current UTC date & UTC time
      (function setUTCDefaults() {
        const nowUTC = new Date(Date.now());

        const iso = nowUTC.toISOString(); // already UTC
        dateInput.value = iso.slice(0, 10); // YYYY-MM-DD
        timeInput.value = iso.slice(11, 16); // HH:MM
      })();

      function convert() {
        const d = dateInput.value;
        const t = timeInput.value;

        if (!d || !t) {
          resultDiv.innerHTML =
            '<div class="muted">Please enter both date and time.</div>';
          return;
        }

        const [Y, M, D] = d.split("-").map(Number);
        const [h, m] = t.split(":").map(Number);

        const srcTZ = tzInput.value;

        // 1) Build a UTC timestamp from YYYY-MM-DD HH:MM
        const utcBase = Date.UTC(Y, M - 1, D, h, m);

        // 2) Adjust to get the real UTC instant corresponding to the chosen srcTZ
        const epochUTC = utcBase - tzOffsets[srcTZ] * 60000;

        function fmt(tz) {
          return new Intl.DateTimeFormat("en-US", {
            year: "numeric",
            month: "short",
            day: "2-digit",
            hour: "2-digit",
            minute: "2-digit",
            hour12: false,
            timeZone: tz,
          }).format(new Date(epochUTC));
        }

        const zones = {
          UTC: "UTC",
          IST: "Asia/Kolkata",
          PST: "America/Los_Angeles",
          CST: "America/Chicago",
          SGT: "Asia/Singapore",
        };

        let html = `<div><strong>Source (${srcTZ}):</strong><br>${fmt(
          srcTZ
        )}<br/><br/>`;

        for (const [label, tz] of Object.entries(zones)) {
          html += `<div><strong>${label}</strong>: ${fmt(tz)}</div>`;
        }

        html += `</div>`;
        resultDiv.innerHTML = html;
      }

      dateInput.addEventListener("input", convert);
      timeInput.addEventListener("input", convert);
      tzInput.addEventListener("input", convert);

      convert();
    </script>
  </body>
</html>
